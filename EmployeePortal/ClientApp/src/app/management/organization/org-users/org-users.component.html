<ngx-loading [show]="loading"></ngx-loading>
<ngx-loading [show]="disableGrid" id="gridDisableDiv"></ngx-loading>

<kendo-grid
  [data]="gridView"
  [pageSize]="gridState.take"
  [skip]="gridState.skip"
  [sort]="gridState.sort"
  [sortable]="true"
  [selectable]="true"
  [filter]="gridState.filter"
  filterable="menu"
  (add)="onAddClick($event)"
  (cancel)="cancelHandler($event)"
  (save)="saveHandler($event)"
  (edit)="editHandler($event)"
  (remove)="removeHandler($event)"
>
<ng-template kendoGridToolbarTemplate>
  <div class="search-bar-container">
    <span class="nav-item search-users">
      <span class="fa fa-search bigger-icon"></span>
      <mat-form-field class="search-bar">
        <input matInput placeholder="Search..." aria-label="Search Users" [(ngModel)]="searchValue" [formControl]="searchCtrl">
        <button mat-button *ngIf="searchValue" matSuffix mat-icon-button aria-label="Clear" (click)="searchValue=''">
          <mat-icon><i class="fa fa-times-circle"></i></mat-icon>
        </button>
        <mat-autocomplete #auto="matAutocomplete">
          <mat-option *ngFor="let user of filteredUsers | async" [value]="user.firstName + ' ' + user.lastName">
            <span>{{user.firstName}} {{user.lastName}}</span>
          </mat-option>
        </mat-autocomplete>
      </mat-form-field>
    </span>
    <span class="nav-item add-users">
        <button kendoGridAddCommand iconClass="fal fa-plus-circle" style="background: none; border: none; height: 100%;"></button>
    </span>
  </div>
</ng-template>
<ng-template kendoGridToolbarTemplate>
  <button kendoGridAddCommand class="k-button">Add User</button>
</ng-template>

<kendo-grid-column field="firstName" title="First Name" width="150px"></kendo-grid-column>
<kendo-grid-column field="lastName" title="Last Name" width="150px"></kendo-grid-column>
<kendo-grid-column field="avatar" title="Avatar" width="125px"></kendo-grid-column>
<kendo-grid-column field="phoneNumber" title="Phone #" width="125px"></kendo-grid-column>
<kendo-grid-column field="email" title="Email" width="125px"></kendo-grid-column>
<kendo-grid-column field="userCategory.categoryName" title="User Category" width="125px"></kendo-grid-column>
<kendo-grid-column field="serviceProvider" title="Service Provider" width="85px">
    <ng-template kendoGridCellTemplate let-dataItem>
    {{dataItem.serviceProvider ? 'Yes' : 'No'}}
  </ng-template>
</kendo-grid-column>
<kendo-grid-column field="canSetBreaks" title="Can Set Breaks" width="85px">
    <ng-template kendoGridCellTemplate let-dataItem>
    {{dataItem.canSetBreaks ? 'Yes' : 'No'}}
  </ng-template>
</kendo-grid-column>
<kendo-grid-command-column title="Actions" width="100px">
  <ng-template kendoGridCellTemplate let-isNew="isNew">
    <button kendoGridEditCommand iconClass="fal fa-edit" style="background: none; border: none; height: 100%; font-size: 20px"></button>
    <button kendoGridRemoveCommand iconClass="fal fa-minus-circle" style="background: none; border: none; height: 100%; font-size: 20px"></button>
    <button kendoGridSaveCommand [disabled]="formGroup?.invalid">{{ isNew ? 'Add' : 'Update' }}</button>
    <button kendoGridCancelCommand>{{ isNew ? 'Discard changes' : 'Cancel' }}</button>
  </ng-template>
</kendo-grid-command-column>
</kendo-grid>

<p-overlayPanel #hoverPanel id="hoverPanel" [dismissable]="'false'">
  Content
</p-overlayPanel>
<app-actionpanel></app-actionpanel>
